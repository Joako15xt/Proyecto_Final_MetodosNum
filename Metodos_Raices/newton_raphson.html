<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Newton-Raphson — e^{-x} - x = 0</title>
<link rel="stylesheet" href="../estilos.css">
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">

<style>
.tabla-azul thead{
  background:#094074;
  color:white;
}
.tabla-azul tbody tr:nth-child(even){
  background:#D8E7F5;
}
.tabla-azul tbody tr:hover{
  background:#B7D1EB;
}
.nota-metodo{
  background:#EEF5FF;
  border-left:6px solid #094074;
  padding:12px;
  margin:16px 0;
  border-radius:6px;
}
</style>

</head>
<body>

<nav class="navbar navbar-default navbar-fixed-top" style="background:#6A0B1F; border:none;">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="../raices.html" style="color:white; font-weight:bold;">Newton-Raphson</a>
    </div>
    <ul class="nav navbar-nav navbar-right">
      <li><a style="color:white;">Humberto Joaquin Loza Fernandez</a></li>
      <li><a style="color:white;">CI: 12480310</a></li>
      <li><a style="color:white;">Lic. Brígida Carvajal Blanco</a></li>
      <li><a href="../raices.html" style="color:white; font-weight:bold; background:#FFD700; padding:8px 15px; border-radius:5px; margin:5px; display:inline-block; color:#6A0B1F !important;">← Volver a Raíces</a></li>
    </ul>
  </div>
</nav>


<div class="container" style="margin-top:90px;">

  <h1 class="titulo">Método de Newton-Raphson</h1>

  <h3>Ejercicio a resolver</h3>
  <p class="descripcion">
    Resolver la ecuación no lineal:
    <br><br>
    <code>f(x)=e^{-x}-x=0</code>
    <br><br>
    aplicando el Método de Newton-Raphson a partir del valor inicial <strong>x₀ = 1</strong>.
  </p>

  <h3>¿Qué es el método de Newton-Raphson?</h3>
  <p class="descripcion">
    Newton-Raphson es un método iterativo basado en aproximar la función con su derivada. Genera
    sucesivos puntos donde la recta tangente corta el eje x. Cuando la derivada no es cero, la convergencia
    suele ser muy rápida (cuadrática).
  </p>

  <div class="nota-metodo">
    Usa derivada: <code>f'(x) = -e^{-x} - 1</code>. Es más rápido que bisección, pero puede fallar si la derivada es nula o muy pequeña.
  </div>


  <div class="capsulas">
    <span class="capsula">x₀ = 1</span>
    <span class="capsula">Derivada requerida</span>
    <span class="capsula">Convergencia rápida</span>
  </div>


  <div class="card-metodo">
      <h3>Aplicación del método</h3>
      <p>
        Fórmula iterativa:
        <br>
        <code>x(i+1) = x(i) - f(x(i)) / f'(x(i))</code>
      </p>
      <button class="btn-metodo" onclick="newton()">Calcular Newton-Raphson</button>
      <div id="tablaNR" style="margin-top:15px;"></div>
  </div>


  <div class="card-metodo">
    <h3>Resultado aproximado</h3>
    <div id="resultadoNR"></div>
  </div>


  <div class="card-metodo">
    <h3>Gráfica e iteraciones</h3>
    <canvas id="graficaNR"></canvas>
  </div>

  <div class="nota-metodo">
    <strong>Conclusión:</strong> Newton-Raphson requiere conocer la derivada pero converge mucho más rápido
    que bisección. Se recomienda cuando la función es suave y la derivada no se anula.
  </div>

</div>



<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
function f(x){ return Math.exp(-x) - x; }
function fp(x){ return -Math.exp(-x) - 1; }


// ======= TU JS ORIGINAL =========
function newton(){
  let x = 1;
  const tol = 0.00005;
  let iter = 0;

  let html = "<table class='table tabla-azul table-bordered'>"+
             "<thead><tr><th>#</th><th>x</th><th>f(x)</th><th>f'(x)</th></tr></thead><tbody>";

  let px=[], py=[];

  while(true){
    let fx = f(x);
    let fpx = fp(x);
    html += `<tr><td>${iter}</td><td>${x.toFixed(6)}</td><td>${fx.toFixed(10)}</td><td>${fpx.toFixed(10)}</td></tr>`;
    px.push(x);
    py.push(fx);

    if(Math.abs(fx) <= tol){
      document.getElementById('tablaNR').innerHTML = html + "</tbody></table>";
      document.getElementById('resultadoNR').innerHTML = `
        <p><strong>Raíz aproximada = </strong>${x.toFixed(10)}</p>
        <p><strong>f(x) = </strong>${fx.toFixed(10)}</p>
        <p><strong>Iteraciones = </strong>${iter}</p>`;
      graf(px,py);
      break;
    }

    x = x - fx/fpx;
    iter++;
    if(iter>100)break;
  }
}

function graf(px,py){
  const ctx=document.getElementById('graficaNR');
  const xs=[], ys=[];
  for(let x=-2;x<=2;x+=0.1){ xs.push(x); ys.push(f(x)); }
  new Chart(ctx,{
    type:'scatter',
    data:{
      labels:xs,
      datasets:[
        {label:'f(x)', data:ys, borderColor:'#094074', showLine:true, fill:false},
        {label:'Iteraciones', data:px.map((m,i)=>({x:m,y:py[i]})), borderColor:'#4C9ED9', showLine:true, fill:false}
      ]
    },
    options:{responsive:true}
  });
}
</script>

<footer>
  <p>&copy; 2025 Métodos Numéricos | Desarrollado por <a href="#">joako15xt</a> | Todos los derechos reservados</p>
</footer>
</body>
</html>
