<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Interpolación de Lagrange — ln(3.5)</title>
  <link rel="stylesheet" href="../estilos.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar navbar-default navbar-fixed-top" style="background:#6A0B1F; border:none;">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="../Interpolacion.html" style="color:white; font-weight:bold;">Lagrange - Interpolación</a>
    </div>
    <ul class="nav navbar-nav navbar-right">
      <li><a style="color:white;">Humberto Joaquin Loza Fernandez</a></li>
      <li><a style="color:white;">CI: 12480310</a></li>
      <li><a style="color:white;">Lic. Brígida Carvajal Blanco</a></li>
      <li><a href="../Interpolacion.html" style="color:white; font-weight:bold; background:#FFD700; padding:8px 15px; border-radius:5px; margin:5px; display:inline-block; color:#6A0B1F !important;">← Volver a Interpolación</a></li>
    </ul>
  </div>
</nav>

<div class="container" style="margin-top:90px;">

  <h1 class="titulo">Interpolación de Lagrange para ln(3.5)</h1>
  <p class="descripcion">
    En esta página se aplica el método de interpolación de Lagrange para aproximar el valor de \(\ln(3.5)\).
    Usaremos el mismo conjunto de puntos de interpolación para todos los métodos (Lagrange, Newton y Splines):
    \(x = 3.0,\; 3.5,\; 4.0\) con \(y = \ln(x)\).
  </p>

  <div class="capsulas">
    <span class="capsula">Puntos elegidos: 3.0, 3.5, 4.0</span>
    <span class="capsula">Función: y = ln(x)</span>
    <span class="capsula">Objetivo: aproximar ln(3.5)</span>
  </div>

  <div class="card-metodo" style="margin-top:30px; cursor:default;">
    <h3>Puntos de interpolación</h3>
    <p>Los valores de la función \(y = \ln(x)\) se calculan en tres puntos cercanos a 3.5. Estos puntos se
       usarán también en los métodos de Newton y Splines para poder comparar resultados.</p>
    <div id="tablaPuntos"></div>
  </div>

  <div class="card-metodo" style="cursor:default;">
    <h3>Cálculo con el polinomio de Lagrange</h3>
    <p>
      El polinomio de Lagrange de grado 2 se construye como:
      \( P(x) = \sum_{i=0}^{2} y_i L_i(x) \), donde \(L_i(x)\) son los polinomios base.
    </p>
    <button class="btn-metodo" onclick="resolverLagrange()">Calcular aproximación de ln(3.5)</button>
    <div id="resultadoLagrange" style="margin-top:15px;"></div>
    <div id="tablaInterpolacion" style="margin-top:15px;"></div>
  </div>

  <div class="card-metodo" style="cursor:default;">
    <h3>Gráfica: función real vs polinomio interpolante</h3>
    <p>La siguiente gráfica compara la función exacta \(y = \ln(x)\) con el polinomio de interpolación de Lagrange en el intervalo [3, 4].</p>
    <canvas id="graficaLagrange"></canvas>
  </div>

</div>

<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
// Puntos fijos compartidos por todos los métodos de interpolación
const puntos = [
  {x: 3.0, y: Math.log(3.0)},
  {x: 3.5, y: Math.log(3.5)},
  {x: 4.0, y: Math.log(4.0)}
];

// Función Lagrange: evalúa P(x)
function lagrangeEval(x){
  let n = puntos.length;
  let suma = 0;
  for(let i=0;i<n;i++){
    let termino = puntos[i].y;
    for(let j=0;j<n;j++){
      if(j !== i){
        termino *= (x - puntos[j].x) / (puntos[i].x - puntos[j].x);
      }
    }
    suma += termino;
  }
  return suma;
}

function mostrarTablaPuntos(){
  let html = "<table class='table table-bordered table-striped'><thead><tr><th>x</th><th>y = ln(x)</th></tr></thead><tbody>";
  puntos.forEach(p => {
    html += `<tr><td>${p.x.toFixed(2)}</td><td>${p.y.toFixed(8)}</td></tr>`;
  });
  html += "</tbody></table>";
  document.getElementById('tablaPuntos').innerHTML = html;
}

function resolverLagrange(){
  const xEval = 3.5;
  const aprox = lagrangeEval(xEval);
  const exacta = Math.log(xEval);
  const errorAbs = Math.abs(exacta - aprox);

  let htmlRes = `<p><strong>Aproximación Lagrange:</strong> P(3.5) = ${aprox.toFixed(8)}</p>`;
  htmlRes += `<p><strong>Valor exacto:</strong> ln(3.5) = ${exacta.toFixed(8)}</p>`;
  htmlRes += `<p><strong>Error absoluto:</strong> ${errorAbs.toExponential(4)}</p>`;
  document.getElementById('resultadoLagrange').innerHTML = htmlRes;

  // Tabla de evaluación de los L_i(3.5)
  let n = puntos.length;
  let htmlTab = "<table class='table table-bordered table-striped'><thead><tr><th>i</th><th>x_i</th><th>y_i</th><th>L_i(3.5)</th><th>y_i · L_i(3.5)</th></tr></thead><tbody>";
  for(let i=0;i<n;i++){
    let Li = 1;
    for(let j=0;j<n;j++){
      if(j !== i){
        Li *= (xEval - puntos[j].x) / (puntos[i].x - puntos[j].x);
      }
    }
    let contrib = puntos[i].y * Li;
    htmlTab += `<tr><td>${i}</td><td>${puntos[i].x.toFixed(2)}</td><td>${puntos[i].y.toFixed(8)}</td><td>${Li.toFixed(8)}</td><td>${contrib.toFixed(8)}</td></tr>`;
  }
  htmlTab += "</tbody></table>";
  document.getElementById('tablaInterpolacion').innerHTML = htmlTab;

  dibujarGrafica();
}

function dibujarGrafica(){
  const ctx = document.getElementById('graficaLagrange');
  const xs = [];
  const real = [];
  const interp = [];

  for(let x=3.0; x<=4.0; x += 0.05){
    xs.push(x.toFixed(2));
    real.push(Math.log(x));
    interp.push(lagrangeEval(x));
  }

  new Chart(ctx, {
    type: 'line',
    data: {
      labels: xs,
      datasets: [
        {
          label: 'y = ln(x)',
          data: real,
          borderColor: 'green',
          fill: false
        },
        {
          label: 'Polinomio de Lagrange',
          data: interp,
          borderColor: 'blue',
          fill: false
        }
      ]
    },
    options: {
      responsive: true,
      tension: 0.2,
      scales: {
        x: { title: { display: true, text: 'x' } },
        y: { title: { display: true, text: 'y' } }
      }
    }
  });
}

// Mostrar tabla de puntos al cargar
mostrarTablaPuntos();
</script>

<footer>
  <p>&copy; 2025 Métodos Numéricos | Desarrollado por <a href="#">joako15xt</a> | Todos los derechos reservados</p>
</footer>
</body>
</html>
