<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Simpson 1/3</title>
  <link rel="stylesheet" href="../estilos.css">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
</head>
<body>
<nav class="navbar navbar-default navbar-fixed-top" style="background:#6A0B1F; border:none;">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand" href="../Integracion.html" style="color:white; font-weight:bold;">Simpson 1/3</a>
    </div>
    <ul class="nav navbar-nav navbar-right">
      <li><a style="color:white;">Humberto Joaquin Loza Fernandez</a></li>
      <li><a style="color:white;">CI: 12480310</a></li>
      <li><a style="color:white;">Lic. Brígida Carvajal Blanco</a></li>
      <li><a href="../Integracion.html" style="color:white; font-weight:bold; background:#FFD700; padding:8px 15px; border-radius:5px; margin:5px; display:inline-block; color:#6A0B1F !important;">← Volver a Integración</a></li>
    </ul>
  </div>
</nav>

<div class="container" style="margin-top:90px;">
  <h1 class="titulo">Método de Simpson 1/3</h1>

  <p class="descripcion">
    En este método, la integral se aproxima usando parábolas que interpolan la función en grupos de tres puntos. Esto
    significa que en lugar de conectar los puntos mediante rectas como en el trapecio, se utilizan curvas cuadráticas,
    generando una aproximación más precisa especialmente en funciones suaves. La función utilizada es
    <code>(x-2)^2</code> entre 2 y 5. Este método requiere que el número de subintervalos sea par porque la construcción
    de los tramos depende de pares de segmentos que conforman el polinomio interpolador.
  </p>

  <img src="../imgej.png" class="img-responsive">

  <p>
    La regla de Simpson 1/3 indica que debemos sumar el primer valor, el último y ponderar los puntos impares con 4 y
    los pares con 2. El factor h/3 establece la relación entre la distancia de separación y la construcción de la
    parábola. En comparación con el trapecio, Simpson 1/3 resulta más preciso debido a la curvatura empleada en la
    interpolación.
  </p>

  <div class="capsulas">
    <span class="capsula">Simpson 1/3</span>
  </div>

  <div class="card-metodo">
    <h3>Fórmula</h3>
    <p>\[\int f(x)dx \approx \frac{h}{3}(y_0+y_n+4(y_1+y_3...)+2(y_2+y_4...))\]</p>
  </div>

  <div class="card-metodo">
  <label>n (par):</label><input id="inputN" value="6" step="2">
  <button onclick="simpson13()" class="btn-metodo">Calcular</button>
  <div id="tablaS1"></div></div>

  <div class="card-metodo"><div id="resultadoS1"></div></div>
  <div class="card-metodo"><canvas id="graficaS1"></canvas></div>

  <p class="descripcion" style="margin-top:30px;">
    Este método suele ser más eficiente que el trapecio porque ajusta mejor la forma de la función. Sin embargo,
    depende de que el número de intervalos sea par, lo cual no permite usar cualquier valor de n.
  </p>

</div>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
function f(x){return Math.pow(x-2,2);}
function simpson13(){
 const a=2,b=5;
 const n=parseInt(inputN.value);
 if(n%2!=0)return alert("n par");
 const h=(b-a)/n;
 let xs=[],ys=[];
 for(let i=0;i<=n;i++){let x=a+i*h;xs.push(x);ys.push(f(x));}
 let html="<table class='table'><tr><th>i</th><th>x</th><th>y</th></tr>";
 for(let i=0;i<=n;i++)html+=`<tr><td>${i}</td><td>${xs[i]}</td><td>${ys[i]}</td></tr>`;
 html+="</table>";
 tablaS1.innerHTML=html;
 let s4=0,s2=0;
 for(let i=1;i<n;i++){
  if(i%2==1)s4+=ys[i]; else s2+=ys[i];
 }
 resultadoS1.innerHTML="<b>Aprox = "+((h/3)*(ys[0]+ys[n]+4*s4+2*s2)).toFixed(8)+"</b>";
 dibujar(xs,ys);
}
function dibujar(xs,ys){
 new Chart(graficaS1,{type:'line',data:{labels:xs,datasets:[{data:ys,borderColor:'blue',fill:false}]}});
}
simpson13();
</script>
</body>
</html>
